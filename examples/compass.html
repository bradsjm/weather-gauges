<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Compass Demo - SteelSeries v3</title>
    <link rel="icon" href="data:," />
    <link rel="stylesheet" href="./common.css" />
    <script type="importmap">
      {
        "imports": {
          "@bradsjm/steelseries-v3-core": "../packages/core/dist/index.js",
          "@bradsjm/steelseries-v3-elements": "../packages/elements/dist/index.js",
          "lit": "https://esm.sh/lit@3.2.1",
          "lit/": "https://esm.sh/lit@3.2.1/",
          "zod": "https://esm.sh/zod@3.24.1"
        }
      }
    </script>
    <script type="module">
      import '@bradsjm/steelseries-v3-elements'

      const gauge = document.querySelector('steelseries-compass-v3')
      const headingInput = document.getElementById('heading')
      const out = document.getElementById('out')
      const log = document.getElementById('log')

      const write = (line) => {
        const stamp = new Date().toLocaleTimeString()
        log.textContent = `[${stamp}] ${line}\n${log.textContent}`.trim()
      }

      const sync = () => {
        const heading = Number(headingInput.value)
        gauge.setAttribute('heading', String(heading))
        out.textContent = String(heading)
      }

      if (gauge) {
        gauge.showHeadingReadout = false
      }

      headingInput.addEventListener('input', sync)

      gauge.addEventListener('ss3-value-change', (event) => {
        write(`value-change ${JSON.stringify(event.detail)}`)
      })
      gauge.addEventListener('ss3-error', (event) => {
        write(`error ${JSON.stringify(event.detail)}`)
      })

      sync()
    </script>
  </head>
  <body>
    <header class="topbar">
      <strong>Compass Gauge Demo</strong>
      <a href="./index.html">Back to index</a>
    </header>
    <main class="container">
      <p class="lead">Compass settings follow the original reference style.</p>

      <div class="card" style="max-width: 430px">
        <steelseries-compass-v3
          class="legacy-theme"
          heading="300"
          size="240"
        ></steelseries-compass-v3>
        <div class="controls">
          <label>Heading</label>
          <input id="heading" type="range" min="0" max="360" value="300" />
          <div>Current: <strong id="out">300</strong></div>
        </div>
        <pre id="log" class="event-log"></pre>
      </div>
    </main>
  </body>
</html>
